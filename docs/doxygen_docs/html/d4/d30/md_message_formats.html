<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bet: messageFormats</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Bet"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bet
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d4/d30/md_message_formats.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">messageFormats </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Here we see the game flow along with message formats that are part of it. Below we dive into understanding the message formats we need to understand the entities in the gaming.</p>
<p>As we know, Pangea is a protocol which defines how the deck needs to be presented, shuffled, distrinuted among the players using the supporting entities <code>DCV (Deck Creating Vendor)</code> and <code>BVV (Blinding Value Vendor)</code>.</p>
<p><code>BVV</code> nodes can be any set of the trsuted nodes, say here notary nodes can act like <code>BVV</code> nodes. Which can take part in deck shuffling, distributing and resolving the payment disputes.</p>
<p><code>DCV</code> can act like a dealer node, where the GUI is cnfigured in the node and the players can access it via the dealer's IP like mentioned below. <code>DCV</code> also takes part in deck shuffling and distribution.</p>
<p>How the playing nodes need to be set up in the backend is very important in order for the player to start playing. First thing is every player who wants to play using Pangea they need to set up the bet node.</p>
<p>Detailed instructions on how to setup the bet node is mentioned <a href="../../../README.md#Steps-to-compile"><b>here</b></a>. Once the node is setup in order to play, the player must need funds, here <code>CHIPS</code> is cryptocurrency which is used for betting and playing nodes are connected via <code>CHIPS-LN</code>.</p>
<h2>Fundng LN Node</h2>
<p>In order to have the funds, one needs to create a CHIPS address in LN-Wallet and then needs to fund as shown below. </p><div class="fragment"><div class="line">* $cd</div><div class="line">* $cd lightning/cli/</div><div class="line">* $./lightning-cli newaddr</div><div class="line">{ &quot;address&quot; : &quot;bFMfVr28hiQ1SMvM2efHkQL9b82B1LfATb&quot; }</div><div class="line">* To this newly generated address transfer the funds using any of the means, once you deposit the funds you can check the balance as follows:</div><div class="line">* $./lightning-cli listfunds</div><div class="line">{ &quot;outputs&quot; : </div><div class="line">        [ </div><div class="line">                { &quot;txid&quot; : &quot;803ca551a788da76fc7c5f1e9b6b9c87a76653887a4c316d01b9e676b6fc62b7&quot;, &quot;output&quot; : 1, &quot;value&quot; : 19499823, &quot;status&quot; : &quot;confirmed&quot; } ], &quot;channels&quot; : </div><div class="line">        [ </div><div class="line">                { &quot;peer_id&quot; : &quot;023aba3ac8e237fd4199c996163e6fe4c54c29f349e913d0a97e48d70863b23dc0&quot;, &quot;short_channel_id&quot; : &quot;3481632:1:0&quot;, &quot;channel_sat&quot; : 494997, &quot;channel_total_sat&quot; : 500000, &quot;funding_txid&quot; : &quot;803ca551a788da76fc7c5f1e9b6b9c87a76653887a4c316d01b9e676b6fc62b7&quot; }, </div><div class="line">                { &quot;peer_id&quot; : &quot;02c015ab6ea37b95cc6939bb89da6473b0de87250ecd4c3b0d64ddf4c62c5679e8&quot;, &quot;short_channel_id&quot; : &quot;3481636:1:0&quot;, &quot;channel_sat&quot; : 92300, &quot;channel_total_sat&quot; : 500000, &quot;funding_txid&quot; : &quot;d0db104b8cf6eb9d59e2c16ffd79193fb2f94f31d075b97eab050d33f5eabf69&quot; }, </div><div class="line">                { &quot;peer_id&quot; : &quot;03658a91403eb125345d7a87f4f91448297c312ccf250314fb9d541d9cf720497d&quot;, &quot;short_channel_id&quot; : &quot;3481639:1:0&quot;, &quot;channel_sat&quot; : 52700, &quot;channel_total_sat&quot; : 500000, &quot;funding_txid&quot; : &quot;4ecca8551a49155055d03fe535993e40ae2dca6d1c36810e6f9e8e87fbe03322&quot; } ] }</div></div><!-- fragment --><h1>Home Page</h1>
<p>In order to play the game the players and delaers should browse to <code><a href="http://">http://</a>&lt;ip_addr&gt;/pangea-poker-frontend/client/</code>, where <code>&lt;ip_addr&gt;</code> is the IP address of the dealer(<code>DCV</code>) node where <code>poker</code> branch of <code>pangea-poker-frontend</code> running in the backend.</p>
<div class="image">
<img src="../.././images/poker_home_page.png" alt="Home page"/>
</div>
<h2>Hardcoded IP addresses</h2>
<p>Every entity is the game runs it's own bet code in the backend, to this IP address of this bet running node a websocket connection is made via front end logic. At this moment all the IP values of the playing entities are hardcoded in the file <code>pangeapoker.js</code> like as shown below: </p><div class="fragment"><div class="line">* pangea.wsURI = &#39;ws://159.69.23.30:9000&#39; \\ This is the dealer node IP</div><div class="line">* pangea.wsURI_bvv = &#39;ws://159.69.23.31:9001&#39; \\ This is the blinder node IP</div><div class="line">* pangea.wsURI_player1 = &#39;ws://159.69.23.28:9002&#39; \\ This is player1 backend bet node IP</div><div class="line">* pangea.wsURI_player2 = &#39;ws://159.69.23.29:9003&#39; \\ This is player2 backend bet node IP</div></div><!-- fragment --> <h2>Send, recieve methods over websockets</h2>
<p>The corresponding send, receive methods over these websockets are mentioned below: </p><div class="fragment"><div class="line">* For DCV</div><div class="line">        * pangea.onMessage                      </div><div class="line">        * pangea.sendMessage</div><div class="line">* For BVV</div><div class="line">        * pangea.onMessage_bvv                  </div><div class="line">        * pangea.sendMessage_bvv</div><div class="line">* For Player1</div><div class="line">        * pangea.onMessage_player1                      </div><div class="line">        * pangea.sendMessage_player1</div><div class="line">* For Player2</div><div class="line">        * pangea.onMessage_player2                      </div><div class="line">        * pangea.sendMessage_player2</div></div><!-- fragment --><h2>Game flow</h2>
<p>The messages that gets exchanged during game play are listed below.</p><ul>
<li>./method_game.md "__game__"</li>
<li>./method_seats.md "__seats__"</li>
</ul>
<p><b>NOTE</b>: I'm using <a href="https://github.com/sg777/pangea-poker-frontend"><b>pangea-poker-frontend</b></a> as the front-end repo to communicate with the backend bet node. Since I'm not the actual front-end dev of this GUI repo, many fields the original author has mentioned is not used by me. So in the next pages in the message formats whichever fields I didn't used I called them as <b>optional</b>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Dec 31 2019 10:16:25 for Bet by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
