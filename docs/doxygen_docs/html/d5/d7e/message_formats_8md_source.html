<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bet: messageFormats.md Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Bet"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bet
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d7e/message_formats_8md.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">messageFormats.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/d7e/message_formats_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Here we see the game flow along with message formats that are part of it. Below we dive into understanding the message formats we need to understand the entities in the gaming.</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;As we know, Pangea is a protocol which defines how the deck needs to be presented, shuffled, distrinuted among the players using the supporting entities `DCV (Deck Creating Vendor)` and `BVV (Blinding Value Vendor)`.</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;`BVV` nodes can be any set of the trsuted nodes, say here notary nodes can act like `BVV` nodes. Which can take part in deck shuffling, distributing and resolving the payment disputes.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;`DCV` can act like a dealer node, where the GUI is cnfigured in the node and the players can access it via the dealer&#39;s IP like mentioned below. `DCV` also takes part in deck shuffling and distribution.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;How the playing nodes need to be set up in the backend is very important in order for the player to start playing. First thing is every player who wants to play using Pangea they need to set up the bet node.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;Detailed instructions on how to setup the bet node is mentioned [__here__](../README.md#Steps-to-compile). Once the node is setup in order to play, the player must need funds, here `CHIPS` is cryptocurrency which is used for betting and playing nodes are connected via `CHIPS-LN`.</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;## Fundng LN Node</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;In order to have the funds, one needs to create a CHIPS address in LN-Wallet and then needs to fund as shown below.</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;```</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;* $cd</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;* $cd lightning/cli/</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;* $./lightning-cli newaddr</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;{ &quot;address&quot; : &quot;bFMfVr28hiQ1SMvM2efHkQL9b82B1LfATb&quot; }</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;* To this newly generated address transfer the funds using any of the means, once you deposit the funds you can check the balance as follows:</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;* $./lightning-cli listfunds</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{ &quot;outputs&quot; : </div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;   [ </div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;           { &quot;txid&quot; : &quot;803ca551a788da76fc7c5f1e9b6b9c87a76653887a4c316d01b9e676b6fc62b7&quot;, &quot;output&quot; : 1, &quot;value&quot; : 19499823, &quot;status&quot; : &quot;confirmed&quot; } ], &quot;channels&quot; : </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;   [ </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;           { &quot;peer_id&quot; : &quot;023aba3ac8e237fd4199c996163e6fe4c54c29f349e913d0a97e48d70863b23dc0&quot;, &quot;short_channel_id&quot; : &quot;3481632:1:0&quot;, &quot;channel_sat&quot; : 494997, &quot;channel_total_sat&quot; : 500000, &quot;funding_txid&quot; : &quot;803ca551a788da76fc7c5f1e9b6b9c87a76653887a4c316d01b9e676b6fc62b7&quot; }, </div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;           { &quot;peer_id&quot; : &quot;02c015ab6ea37b95cc6939bb89da6473b0de87250ecd4c3b0d64ddf4c62c5679e8&quot;, &quot;short_channel_id&quot; : &quot;3481636:1:0&quot;, &quot;channel_sat&quot; : 92300, &quot;channel_total_sat&quot; : 500000, &quot;funding_txid&quot; : &quot;d0db104b8cf6eb9d59e2c16ffd79193fb2f94f31d075b97eab050d33f5eabf69&quot; }, </div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;           { &quot;peer_id&quot; : &quot;03658a91403eb125345d7a87f4f91448297c312ccf250314fb9d541d9cf720497d&quot;, &quot;short_channel_id&quot; : &quot;3481639:1:0&quot;, &quot;channel_sat&quot; : 52700, &quot;channel_total_sat&quot; : 500000, &quot;funding_txid&quot; : &quot;4ecca8551a49155055d03fe535993e40ae2dca6d1c36810e6f9e8e87fbe03322&quot; } ] }</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;           </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;```</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;# Home Page</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;In order to play the game the players and delaers should browse to `http://&lt;ip_addr&gt;/pangea-poker-frontend/client/`, where `&lt;ip_addr&gt;` is the IP address of the dealer(`DCV`) node where `poker` branch of `pangea-poker-frontend` running in the backend.</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;![Home page](./images/poker_home_page.png)</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;## Hardcoded IP addresses</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;Every entity is the game runs it&#39;s own bet code in the backend, to this IP address of this bet running node a websocket connection is made via front end logic. At this moment all the IP values of the playing entities are hardcoded in the file `pangeapoker.js` like as shown below:</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;```</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;* pangea.wsURI = &#39;ws://159.69.23.30:9000&#39; \\ This is the dealer node IP</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;* pangea.wsURI_bvv = &#39;ws://159.69.23.31:9001&#39; \\ This is the blinder node IP</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;* pangea.wsURI_player1 = &#39;ws://159.69.23.28:9002&#39; \\ This is player1 backend bet node IP</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;* pangea.wsURI_player2 = &#39;ws://159.69.23.29:9003&#39; \\ This is player2 backend bet node IP</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;```</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;## Send, recieve methods over websockets</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;The corresponding send, receive methods over these websockets are mentioned below:</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;```</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;* For DCV</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   * pangea.onMessage                      </div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;   * pangea.sendMessage</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;* For BVV</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   * pangea.onMessage_bvv                  </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   * pangea.sendMessage_bvv</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;* For Player1</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   * pangea.onMessage_player1                      </div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   * pangea.sendMessage_player1</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;* For Player2</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   * pangea.onMessage_player2                      </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   * pangea.sendMessage_player2</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;```</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;## Game flow</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;The messages that gets exchanged during game play are listed below.</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;* [__game__](./method_game.md)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;* [__seats__](./method_seats.md)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;__NOTE__: I&#39;m using [__pangea-poker-frontend__](https://github.com/sg777/pangea-poker-frontend) as the front-end repo to communicate with the backend bet node. Since I&#39;m not the actual front-end dev of this GUI repo, many fields the original author has mentioned is not used by me. So in the next pages in the message formats whichever fields I didn&#39;t used I called them as __optional__.</div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d5/d7e/message_formats_8md.html">messageFormats.md</a></li>
    <li class="footer">Generated on Tue Dec 31 2019 10:16:24 for Bet by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
